Full Technical Specification for Automation Framework
ğŸ”§ Objective:
Update the recent project  to full project Java Maven-based automation framework to test the End-to-End (E2E) booking and payment flow for a web-based system. The framework should:
Test multiple payment gateways (Stripe, Paymob, Fawry)


Support 3 environments (Staging, Alpha, Production)


Be suitable for CI/CD Integration (e.g., via GitHub Actions)


Allow test execution per environment or per gateway


Generate clear HTML reports and optionally integrate with Slack



ğŸ“ Project Structure:
pgsql
CopyEdit
booking-automation-framework/
â”œâ”€â”€ pom.xml
â”œâ”€â”€ testng.xml
â”œâ”€â”€ README.md
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ config/
â”‚   â”‚       â”‚   â”œâ”€â”€ staging.properties
â”‚   â”‚       â”‚   â”œâ”€â”€ alpha.properties
â”‚   â”‚       â”‚   â””â”€â”€ production.properties
â”‚   â”‚       â”œâ”€â”€ testdata/
â”‚   â”‚       â”‚   â””â”€â”€ stripe_test_card.json
â”‚   â”‚       â””â”€â”€ log4j2.xml
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/
â”‚           â””â”€â”€ com.example.booking/
â”‚               â”œâ”€â”€ api/
â”‚               â”‚   â”œâ”€â”€ ApiClient.java
â”‚               â”‚   â”œâ”€â”€ endpoints/
â”‚               â”‚   â”œâ”€â”€ pojos/
â”‚               â”œâ”€â”€ ui/
â”‚               â”‚   â”œâ”€â”€ DriverManager.java
â”‚               â”‚   â””â”€â”€ pages/
â”‚               â”œâ”€â”€ tests/
â”‚               â”‚   â”œâ”€â”€ BaseTest.java
â”‚               â”‚   â””â”€â”€ E2E_Booking_Test.java
â”‚               â””â”€â”€ utils/
â”‚                   â”œâ”€â”€ ConfigManager.java
â”‚                   â”œâ”€â”€ ExtentManager.java
â”‚                   â”œâ”€â”€ JsonUtil.java
â”‚                   â””â”€â”€ TestListener.java


ğŸŒ Environments
You must support:
staging


alpha


production


Each environment has its own config.properties file with:
properties
CopyEdit
base.url=
therapist.token=
client.token=
operator.token=
gateway.id.stripe=
gateway.id.paymob=
gateway.id.fawry=


ğŸ’³ Gateways to Cover
âœ… Supported:
Stripe


Paymob


Fawry


âŒ Wallet is removed from scope

ğŸ”„ Booking Flow â€“ (Flow Magic)
Get Free Slots API â†’ returns:


tSlotDate


tSlotTime


serviceId


Get Timeslot Details API using above â†’ returns:


âœ… timeslotId


Reservation API


Send timeslotId and gatewayId


Response always includes:


orderId


For Fawry: referenceNumber


For others: redirectToUrl



ğŸ§ª Test Case Matrix
âœ… Group A (Gateways without Coupon)
test_gatewayWithoutCoupon


Sends gatewayId only in reservation API


UI test for payment


Then:


Validate API â†’ Check operator with orderId + today's date



ğŸŸï¸ Group B (Coupon Use Cases)
test_gatewayWithPartialCoupon


Uses coupon + gateway (e.g., 50% discount)


Reservation API includes couponCode


UI flow proceeds as normal


test_100%Coupon


gatewayId = null + couponCode = valid_100_percent


Skips UI redirect step


No validate/cron needed


Direct check via operator API using orderId


âŒ Removed:
test_gatewayWithPartialWallet


test_gatewayWithPartialWalletAndCoupon



ğŸ’¡ Special Gateway Notes
Fawry
Same reservation API with Fawry gatewayId


Response includes referenceNumber


UI Payment is on a static Fawry URL (no redirect)


After payment:


Either Validate API or simulate cron


Final check via Operator API using orderId



ğŸ“¦ Reporting
Use ExtentReports


Enable logging for requests/responses (RestAssured filters)


Catch and log any API failures using try/catch


Print statusCode and responseBody on failure



âš™ï¸ CI/CD Integration
Use GitHub Actions


Trigger based on target branch:


staging â†’ run tests with -Denv=staging


alpha â†’ run with -Denv=alpha


main or production â†’ run with -Denv=production


Use testng.xml to organize and run grouped tests


Export report as artifact + optionally send summary to Slack



ğŸ” Validation Logic
Each payment flow ends with:
Call validateTransaction(orderId)


OR call cronSimulationAPI(orderId) (acts as fallback)


Final confirmation via operator/orders endpoint using:


orderId


current date



ğŸ”’ Error Handling
Every API call must wrap in try/catch


Log:


statusCode


responseBody


Any exception stack trace



ğŸ“© Slack Integration 
Send summary report (pass/fail per environment) to a configured Slack channel

